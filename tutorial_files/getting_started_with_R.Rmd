---
title: "Getting Started with R"
author: "Musundi DS"
date: "`r Sys.Date()`"
output: html_document
header-includes:
    - \usepackage{setspace}\doublespacing
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##### **1.1 Why R**

R is common programming language used for analyzing statistical data across the globe. R is commonly used because its:

-   Free and open source

-   Runs across different operating systems including Windows, Mac OS and Linux

-   Large community of users who can help troubleshoot and develop new packages

-   Allows you to create presentations, HTML files and even web packages

-   Integrates with version control tools like Git

##### **1.2 RStudio Orientation**

Rstudio has the following layout based on your operating system.

![](rstudio.png){width="100%"}

The description of the three parts is highlighted below

**Console/Terminal/Jobs** (left)

This is where you write your code. The symbol "\>" indicates when you start writing your code. For example you could type 2+2 to see the output

![](rconsole_eval.png){width="100%"}

However when you start writing more code, the use of the console becomes cumbersome. Therefore we opt to write scripts by creating scripts by clicking on File\>New File \> R Script.

![](new_script.png){width="100%"}

Alternatively you can click on the two boxes found at end of the console to see what happens(A source code windows opens where you can write your code)

![](rstudio_new.png){width="100%"}

Now write 2+2 on the script.To source your code you can choose to click on Run found on teh right hand of the source code window.Alternatively, you could press **Ctrl+Ent** and check the output on the Console window below

![](rstudio_run.png)

**Environment/History/Connections** (top right)

Environment part displays the object you have created. For example we want to create an object x and assign a specific parameter to it. To assign a parameter we either use "\<-" or "=". We will learn more about objects in the lessons to come.

```         
x = 10
y <-10
```

-   History is used to show which commands you have typed

-   Connections allows you to connect to various external databases.

**Files/Plots/Packages/HelpViewer** (bottom right)

-   The "Files" section lists all files or directories present in your current working directory, their size and when they were modified. The "Plots" section produces a graphical interface which displays your plot of interest (To be learned). The "Packages" section shows any updated R package. It also allows you to update and install new packages (To be learned). The "Help" section displays R documentation for given issue. Attempt this in your Rscript

```         
?print
help(print)
```

'Viewer' tab displays local web content such as web graphics generated by some packages.

**Assignment 1**

-   On Rstudio, Go to Tools \> Global Options \> Appearance

-   Change the appearance of the background to any colour

-   Go to Pane layout and interchange the position of Console with environment \> History \> Connections

-   Run the help command below and summarize what it does

```         
help("data.table")
```

##### **1.3 R Packages**

A package is a collection of functions, data and help files collated into a well defined standard structure which you can download and install in R. R base comes pre-installed with a number of different packages. The packages can easily be seen on the Package section in ***Files/Plots/Packages/HelpViewer***. Additional R packages are installed from Comprehensive R Archive Network (CRAN) (network or server that store latest R files, code and documentation across the globe)

To install any package we use different options.

-   Installing package from CRAN using `install.packages()`

```         
install.packages("readxl", dependecies=TRUE)
```

The package `readxl` is commonly used to read excel files. The use of `dependecies =TRUE` ensures that you download any additional files associated with your package. Its important to regularly update your packages to the latest version. To do this we use `update.packages(ask=FALSE)`. `ask=FALSE` ensures that you do not have to confirm each package each time. ***NB: Updating or installing packages requires an internet connection because you are connecting to the server.***

-   Install from Bioconductor.

First we need to install BiocManager

```         
install.packages(BiocManager, dependecies = TRUE)
```

Afterwards you can install the required packages using `BiocManager::install()`

`BiocManager::install("edgeR")`. Similarly you can update packages using `BiocManager::install(ask=FALSE)`.

Once a package has been installed, it is stored within the library. If you want to use a specific package then you call the packages from the library by using

`library(readxl)`

##### **1.4 Working directories**

The working directory normally shows the default location where you currently are and is shown as the first line under the console

![](working_directory.png) Alternatively to get your working directory you can use the following command

`getwd()`

![](getwd.png)

In this case my working directory is /home/bioinfo/R_analysis/seby/R_tutorial_MKU. The "\~" sign therefore normally indicates my home directory in this case /home/bioinfo/. Your working directory will be differ depending on how you have named your files and the operating system you are using. The working directory is important because it shows you which files you can access at any given point. To check which files you directly access check on the Files window on your right.The files below are in my relative path. If I wanted to call any I would only be required to type in their starting letter and press `tab` on my keyboard.

![](files_wd.png)

In case the file you are looking for is saved in another folder you will have to use the absolute path in windows. The abosolute path is the full path. For example if the files I was interested in were in the another folder "/home/bioinfo/R_analysis/seby" I would type the full or absolute path. Say I wanted to change my working directory to work from "/home/bioinfo/R_analysis/seby". This means I would have to set a new working directory. To do this I would use the following command.

`setwd("/home/bioinfo/R_analysis/seby")`

After doing this type `getwd()` to confirm the change in the working directory.The problem with using the `setwd` is that it does not make it easy to share the same script and data with someone else because they also have different working directories. This results in a project that is not self-contained and not easily portable. R solves this problem by creating projects which carry all of your data and scripts. Projects files end with the extension \``.proj`. To create a project go to File \> New Project\> New Directory \> New Project \> to have this pop up

![](project_set.png)

Chose the directory name where you want the project to be created. The name should not have any space. Also specify the subdirectory. In this case we can name the directory as R_training. A new project will load up. Check the top right hand corner to see the changes. Save your Rscript by `Ctrl + S` or going to \> File \> Save. Rscripts are saved with the extension `.R`. Check the file section to see your script. Now quit the R session by going to \> File \> Quit Session. Instead of starting R again from Windows search we are going to search it from the folder where we saved the R project. Search for the file with the extension `.proj` and click on it to restart Rstudio

Click on the link below for exercise questions

<https://alexd106.github.io/intro2R/exercise_1.html>

##### **1.5 R basics**

An object is simply a data structure that has some methods and attributes. Everything in R is an object. Here are some common rules used in R programming

-   To assign a variable we use '=' or "\<-". For example, If I want x to represent 10, it would be `x=10` or `x <- 10`

-   R is case sensitive. `X<-10` differs from `x <-10`. Similarly `ANOVA` , `anova` and `Anova` are different objects.

-   `#` symbol is used to represent comments in R and is normally not read/ignored in the script. However adding comments to your R script gives you room to understand the code much better later on. For example

```         
########################################################################################
# BMI Calculator
########################################################################################

# The purpose of this script is to create a BMI calculator 

# Clean working environment

rm(list=ls())

## Load packages 

library(readx1)
library(tidyverse)

# Load data 

BMI_data <- read_excel("bmi_data.xls")

```

-   If a continuation prompt + appears in the console after you execute your code this means that you haven't completed your code correctly. This often happens if you forget to close a bracket and is especially common when nested brackets are used ((((some command))). Just finish the command on the new line and fix the typo or hit escape on your keyboard (see point below) and fix.

-   When assigning variables using underscores and avoid leaving spaces.

**Basic arithmetic**

R is capable of carrying out arithmetic. The following symbols are used. The symbols  `+`,  `-`, `*`
 are for carrying out addition, subtraction and multiplication. 

Examples 

```
1589 + 1899 
```

```
12-6
```
```
10*10
```

R also contains some common mathematical functions like `log()` `log10()` `exp` `pi` `sqrt`among others.  

```
log(100)
log10(100)
exp(1)
sqrt(256)
2^4
pi
pi * 2^4 
```

To assign an object we prefer to use `<-`. For example `x <-10`, we have assigned the variable 10 to x. Once you assign a given variable to an object and run the command it pops out in the environment section. Apart from numbers we can also assign strings or alphabetical information. For example 

```
my_string <- "Tree"
```
 String or word like variables are normally written in "" or ''



**Objects in R **

There are several different types of objects including vectors, dataframes, lists, matrices, arrays and attributes. 

-   **Vector**
 A vector is a list of items in R. Since a list contains more than one variable we normlly concatanate it or join it and its commonly represented by `c`
 
 ```
 # Create a vector 
 
 my_vector <- c(10,11,15,16,7)
 
 # Display items present in a vector 
 
 my_vector 
 
 # Check the number of elements present in a vector
 
 length(my_vector)

# Calculate the mean of the vector 

mean(my_vector)

# calculate the standard deviation of the vector 

sd(my_vector)

# select the fourth item of the vector 
## we use [] and the specific position for indexing. Index in Rstudio begin from 1.

my_vector[4]

# Replace the fourth vector with a string "Apple"
 my_vector[4] <- "Apple"

# Extract more than one value in my_vector

my_vector[c(1,2,4)]

# Extract range of values in a vector. We use : to show the range

my_vector[c(1:3)]


# Extract values greater than 15 

my_vector[my_vector>15]

# Extract values greater than or equal to 15

my_vector[my_vector>=15]

# Extract values equal to 15.  (==) used to show equal to

my_vector[my_vector == 10]

# Extract values not equal to 15 (!= used to show not equal)

my_vector[my_vector != 15]

# Extract values less than 5 

my_vector[my_vector < 15]

# Add new variables to vector 

my_vector[6:8] <- c(23,27,9)

# We can also use the & for more than one expression. Extract values greater than 10 AND less than 16

my_vector[my_vector>10 & my_vector<16]

# We can also use the "|" for more than one expression. Extract values greater than 10 OR less than 16

my_vector[my_vector>10 | my_vector<16]

# sort elements in order (default sorts from smallest to largest)
sorted_vector <- sort(my_vector)

# sort elements from largest to smallested

sorted_vector <- sort(my_vector, decreasing=TRUE)
```
Exercises -

-   Let’s use R as a fancy calculator. Find the natural log, log to the base 10, log to the base 2, square root and the natural antilog of 12.43.

-   Use R to determine the area of a circle with a diameter of 20 cm and assign the result to an object called area_circle. Rememeber r knows `pi`

-    Now for something a little more tricky. Calculate the cube root of 14 x 0.51. 

-   Create a vector called weight containing the weight (in kg) of 10 children: 69, 62, 57, 58, 58, 64, 56, 66, 67, 66. Calculate the mean, variance, standard deviation, range of weights and the number of children of your weight. Extract the weights for the first five children and store these weights in a new variable called first_five. 

-   Create another vector called height containing the height (in cm) of the same 10 children: 112, 102, 83, 84, 99, 90, 77, 112, 133, 112. Use the summary() function to summarise these data in the height object. Extract the height of the 2nd, 3rd, 9th and 10th child and assign these heights to a variable called some_child. Extract all the heights of children less than or equal to 99 cm and assign to a variable called shorter_child.

- Now you can use the information in your weight and height variables to calculate the body mass index (BMI) for each child. The BMI is calculated as weight (in kg) divided by the square of the height (in meters). Store the results of this calculation in a variable called bmi. Note: you don’t need to do this calculation for each child individually, you can use both vectors in the BMI equation – this is called vectorisation

Given the following vector in R with the following numbers 12, 13, 17, 20, 18, 13, 16, 18, 16 and 22. Assign the vector to the variable "vector_1". Answer the following questions using the vector created

-   How many items are present in the vector
-   Calculate the mean, median, mode , standard deviation, range, minimum and maximum value and assign each output in a different variable 
-   Sort the data in  ascending and descending order 
-   Extract values that are equal to 18
-   Extract the fifth value from the vector 
-   Replace the 6th variable with integer 10 and "Banana".Assign the vector to the name vector_2
-   Extract values that are greater than or equal to 20
-   Right the command to access the last element of the vector without counting its position 
-   Find second highest value in a given vector.
-    Create a new vector with the follow values: 45, 18, 17, 19, 20 and name it "vector_3". Concatenate vector_1 and vector_3 to form vector_4. Use `help(append)` to see how to solve the above. 
-   Create a vector with five names of the members of our lab and name it "gitakalab"
-   Check the environment to see the type of variables of your output in the above exercise. What do you think the following indicate "
```typeof(vector_1)```
```typeof(vector_3)```
```typeof(gitakalab)```


-  Create a vector containing the following intergers 3, 5, 7, 1, 9, and 20 and assign it to the name vec_1.
-  Create a new vector with the following numbers 17, 15, 13, 19, 11, and 0 and assign to another vector vec_2
-  What does  vec_1 + vec_2 output. 

**Missing data**

In R missing data is represented by  `NA` indicating Not available.  For example we create a vector of average temperatures for the last ten days.  The temperatures are 27.2, NA, 27.1, 26.9, 26.5, 25.8, 25.8, 25.5, NA, and 25.5.  Now calculate the mean temperature. 



**Practice questions**

Let’s give the children some names. Create a new vector called child_names with the following names of the 10 children: "Alfred", "Barbara", "James", "Jane", "John", "Judy", "Louise", "Mary", "Ronald", "William". A really useful (and common) task is to order the values of one variable by the order of another variable. To do this you will need to use the order() function in combination with the square bracket notation [ ]. Create a new variable called names_sort to store the names of the children ordered by child height (from shortest to tallest). Who is the shortest? who is the tallest child?

Learn about `seq` and `rep` functions in R and write the commands that give the following output

-   1 2 3 1 2 3 1 2 3
-   “a” “a” “a” “c” “c” “c” “e” “e” “e” “g” “g” “g”
-   “a” “c” “e” “g” “a” “c” “e” “g” “a” “c” “e” “g”
-   1 1 1 2 2 2 3 3 3 1 1 1 2 2 2 3 3 3
-   1 1 1 1 1 2 2 2 2 3 3 3 4 4 5
-   7 7 7 7 2 2 2 8 1 1 1 1 1


```DATA STRUCTURES`` -List, arrays, data frames and matrices
